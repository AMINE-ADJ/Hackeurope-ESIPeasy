<div>
  <div class="flex items-center justify-between mb-6">
    <h1 class="text-2xl font-bold text-white">Provider Management</h1>
    <div class="flex items-center space-x-3">
      <div class="flex items-center space-x-2">
        <%= link_to "All", providers_path, class: "px-3 py-1 text-xs rounded-full #{params[:type].blank? ? 'bg-tg-green-600 text-white' : 'bg-tg-dark-700 text-gray-400 hover:bg-tg-dark-600'}" %>
        <%= link_to "Datacenter", providers_path(type: "datacenter"), class: "px-3 py-1 text-xs rounded-full #{params[:type] == 'datacenter' ? 'bg-blue-600 text-white' : 'bg-tg-dark-700 text-gray-400 hover:bg-tg-dark-600'}" %>
        <%= link_to "Gamer", providers_path(type: "gamer"), class: "px-3 py-1 text-xs rounded-full #{params[:type] == 'gamer' ? 'bg-purple-600 text-white' : 'bg-tg-dark-700 text-gray-400 hover:bg-tg-dark-600'}" %>
        <%= link_to "Recycler", providers_path(type: "energy_recycler"), class: "px-3 py-1 text-xs rounded-full #{params[:type] == 'energy_recycler' ? 'bg-tg-green-600 text-white' : 'bg-tg-dark-700 text-gray-400 hover:bg-tg-dark-600'}" %>
      </div>
      <%= link_to "‚ûï Register Provider", new_provider_path, class: "px-4 py-2 bg-tg-green-600 hover:bg-tg-green-500 text-white text-sm font-medium rounded-lg transition" %>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
    <% @providers.each do |org| %>
      <div class="grid-card bg-tg-dark-800 rounded-xl border border-gray-700/50 p-5 <%= 'border-tg-green-600/30' if org.always_green? %>">
        <div class="flex items-center justify-between mb-3">
          <div>
            <%= link_to org.name, provider_path(org), class: "text-lg font-bold text-white hover:text-tg-green-400" %>
            <div class="flex items-center space-x-2 mt-1">
              <% case org.org_type %>
              <% when "datacenter" %>
                <span class="px-2 py-0.5 text-[10px] bg-blue-900/50 text-blue-400 rounded-full font-medium">üè¢ Datacenter</span>
              <% when "gamer" %>
                <span class="px-2 py-0.5 text-[10px] bg-purple-900/50 text-purple-400 rounded-full font-medium">üéÆ Gamer</span>
              <% when "energy_recycler" %>
                <span class="px-2 py-0.5 text-[10px] bg-tg-green-900/50 text-tg-green-400 rounded-full font-medium">‚ôªÔ∏è Energy Recycler</span>
              <% end %>

              <% if org.verified? %>
                <span class="px-2 py-0.5 text-[10px] bg-tg-green-900/50 text-tg-green-400 rounded-full">‚úì Verified</span>
              <% else %>
                <span class="px-2 py-0.5 text-[10px] bg-yellow-900/50 text-yellow-400 rounded-full">‚è≥ Pending</span>
              <% end %>
            </div>
          </div>
          <div class="text-right">
            <p class="text-xs text-gray-500">Tier</p>
            <p class="text-lg font-bold text-tg-green-400"><%= org.tier %></p>
          </div>
        </div>

        <div class="grid grid-cols-3 gap-3 text-center mt-4 pt-3 border-t border-gray-700/30">
          <div>
            <p class="text-lg font-bold text-white"><%= org.compute_nodes.count %></p>
            <p class="text-[10px] text-gray-500">Nodes</p>
          </div>
          <div>
            <p class="text-lg font-bold text-tg-green-400"><%= org.compute_nodes.green.count %></p>
            <p class="text-[10px] text-gray-500">Green</p>
          </div>
          <div>
            <p class="text-lg font-bold text-blue-400"><%= org.compute_nodes.mig_capable.count %></p>
            <p class="text-[10px] text-gray-500">MIG</p>
          </div>
        </div>

        <div class="flex items-center justify-between mt-4 pt-3 border-t border-gray-700/30">
          <%= link_to "View Details ‚Üí", provider_path(org), class: "text-xs text-tg-green-500 hover:text-tg-green-400" %>
          <% unless org.onboarding_complete? %>
            <%= link_to "Complete Onboarding ‚Üí", onboard_provider_path(org), class: "text-xs text-yellow-500 hover:text-yellow-400" %>
          <% end %>
        </div>
      </div>
    <% end %>

    <% if @providers.empty? %>
      <div class="col-span-full bg-tg-dark-800 rounded-xl border border-gray-700/50 p-12 text-center">
        <p class="text-gray-500 text-lg mb-4">No providers registered yet.</p>
        <%= link_to "Register First Provider", new_provider_path, class: "px-6 py-2 bg-tg-green-600 hover:bg-tg-green-500 text-white font-medium rounded-lg transition" %>
      </div>
    <% end %>
  </div>
</div>
